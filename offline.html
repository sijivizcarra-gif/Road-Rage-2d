<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Offline - Road Rage 2D</title>
    <style>
        body { 
            margin: 0; padding: 40px; 
            background: #050505; color: white;
            font-family: sans-serif; text-align: center;
            display: flex; justify-content: center; align-items: center;
            height: 100vh;
        }
        .box { 
            max-width: 400px; padding: 30px;
            border: 1px solid #faff00; border-radius: 10px;
            background: rgba(20,20,20,0.9);
        }
        h1 { color: #faff00; }
        button { 
            background: #faff00; color: black;
            border: none; padding: 15px 30px;
            font-size: 16px; font-weight: bold;
            cursor: pointer; margin-top: 20px;
            margin: 10px;
            width: 100%;
        }
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="box">
        <h1>‚ö†Ô∏è Road Rage 2D is Offline</h1>
        <p>The game is cached on your device!</p>
        <p>Connect to internet once to update, then play anytime offline.</p>
        
        <div class="button-container">
            <button onclick="location.reload()">‚Üª Retry Connection</button>
            <button onclick="checkCache()">üì¶ Check Cache Status</button>
            <button onclick="goToGame()">üéÆ Try Load Game</button>
        </div>
    </div>

    <script>
        function checkCache() {
            if ('caches' in window) { 
                caches.open('road-rage-complete-v1.0').then(c => {
                    c.keys().then(keys => {
                        const audioFiles = keys.filter(k => k.url.includes('.m4a'));
                        const images = keys.filter(k => k.url.includes('.png'));
                        const htmlFiles = keys.filter(k => k.url.includes('.html'));
                        
                        alert(`üéÆ ROAD RAGE 2D - OFFLINE STATUS\n\n` +
                              `üìÅ Total Files: ${keys.length}\n` +
                              `üöó Car Images: ${images.length}/9\n` +
                              `üéµ Music Tracks: ${audioFiles.length}/5\n` +
                              `üìÑ Game Pages: ${htmlFiles.length}\n\n` +
                              `Status: ${audioFiles.length >= 5 && images.length >= 9 ? 
                                '‚úÖ FULLY READY OFFLINE' : 
                                '‚ö†Ô∏è PARTIALLY CACHED'}\n\n` +
                              `${audioFiles.length >= 5 ? 'üéµ Music ready offline!' : 'Connect online for full music.'}`);
                    });
                }).catch(err => {
                    alert('Cache check failed: ' + err);
                });
            } else {
                alert('Cache API not supported in this browser.');
            }
        }
        
        function goToGame() {
            // Try to load the main game
            window.location.href = 'index.html';
        }
        
        // Auto-check cache on page load
        window.addEventListener('load', function() {
            console.log('Offline page loaded');
            
            // Check if we have game files cached
            if ('caches' in window) {
                caches.match('index.html').then(response => {
                    if (response) {
                        console.log('Game is cached, you can play offline!');
                    } else {
                        console.log('Game not cached yet. Need internet connection.');
                    }
                });
            }
        });
    </script>
</body>
</html>
